# general
alias search='yay -Ss'
alias ka='killall'
alias mute='pamixer -t'
alias tor='sudo su - tor tor'
alias nettest="timeout 2 wget -q --spider http://youtube.com"
alias ref='exec zsh'
alias cat='bat'
alias update-grub='sudo grub-mkconfig -o /boot/grub/grub.cfg'
alias less='bat'
alias colors='for i in {0..255}; do print -Pn "%K{$i}  \
 %k%F{$i}${(l:3::0:)i}%f " ${${(M)$((i%6)):#3}:+"\n"}; done'

# updating stuff
alias ua='source ~/.alias'
alias update-packages='yay -Qqe > ~/.dotfiles/packages'
alias upsys='yay -Syu'

# files
alias rm='rm -rf'

# background jobs (background function defined below)
alias vlc='bground vlc'
alias qb='bground qutebrowser'

# sudo musts
alias systl='sudo systemctl'
alias systart='sudo systemctl start'
alias sysen='sudo systemctl enable'
alias systop='sudo systemctl stop'
alias sysdis='sudo systemctl disable'

# drives
alias mu='sudo mount'
alias um='sudo umount'
alias dd='sudo dd'
alias lsb='lsblk'

# fonts
alias list-fonts='kitty + list-fonts --psnames'
alias add-fonts='mv *.[ot(wo)]tf ~/.local/share/fonts'

# ls
alias ls='lsd -F'
alias tr='lsd --tree -I node_modules -I .git'
alias tra='tr -Ah'

# ne
alias ne='nmcli device wifi'
alias ner='ne rescan && ne'
alias nerst='sudo systemctl restart NetworkManager'
alias nec='ne connect'
alias myip="ifconfig wlp3s0 | grep -Eo 'inet (addr:)?([0-9]*\.){3}[0-9]*' | \
grep -Eo '([0-9]*\.){3}[0-9]*' | grep -v '127.0.0.1'"


# git
alias cc='git rev-list --count HEAD'
alias gs='git status -s'
alias grh='git reset HEAD~'
alias create-repo='gh repo create'
alias gcm='git commit -m'

# npm
alias ni='npm install'
alias nig='sudo npm install -g'
alias ns='npm start'
alias nr='npm run'
alias nb='npm run build'

# yarn
alias y='yarn'
alias ya='yarn add'
alias yag='yarn global add'
alias yi='yarn install --ignore-optional'
alias ys='yarn start'
alias yu='yarn upgrade'
alias yh='yarn help'
alias yr='yarn remove'
alias rmny='rm -rf node_modules/ yarn.lock'

# pyenv
alias pye='pyenv'
alias pyei='pyenv install'
alias pyel='pyenv install --list | grep'
alias pyev='pyenv versions'
alias pyeg='pyenv global'

# python
alias pi='pip install'
alias pu='pip install --upgrade pip'
alias pipr='pip install -r requirements.txt'
alias actv='source .venv/bin/activate'
alias deact='deactivate'

# TODO: color test


# colors needed in functions
green="\033[0;32m"
yellow="\033[0;33m"
blue="\033[0;34m"
dark_yellow="\033[0;93m"
purple="\033[38;5;93m"
light_green="\033[38;5;043m"
# things that requires arguments or one liners can't do

# find any (almost) github user's email
find-email () {
    nettest
    if [[ $? -eq 0 ]]; then
        email=$(curl -s -N https://api.github.com/users/$1/events/public | grep -Eio -m 1 '\b[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}\b')
        if [[ $? -eq 0 ]]; then
            echo -e "\n${light_green}Email Found ðŸŽ‰ðŸš€"
            echo -e "${blue}$1${dark_yellow} ->  ${purple}$email"
        else
            echo -e "${dark_yellow}Username Not Found ðŸ˜ˆðŸ¤¬"
        fi

    else
        echo -e "${yellow}You are offline ðŸ˜¡ðŸ¥µ"
    fi
    echo
}

rn () {
    new_location=$(dirname $1)/$2
    mv $1 $new_location
}

volume () {
    if [[ -n $1  ]]; then
        pamixer --set-volume $1
    else
        pamixer --get-volume
    fi
}

# network test
nt () {
    nettest
    if [[ $? -eq 0 ]]; then
        echo -e "${green}You are online ðŸ¥³ðŸŽ‰"
    else
        echo -e "\033[0;33mYou are offline ðŸ˜¡ðŸ¥µ"
    fi
}

vim () {
    # if file is an directory change working directory
    [[ -d "$1" ]] && cd "$1"
    if [[ ! -e "$1" ]]; then
        # check_perm declares the file to check write permission 
        check_perm=$(dirname "$1") 
    else
        check_perm="$1" 
    fi

    # if user has write permission donot use sudo
    if [[ -w "$check_perm" ]]; then
        nvim $1
    else
        sudo nvim $1
    fi
    # if file was an directory change directory to orignal one
    [[ -d "$1" ]] && cd -
    return 0
}

# detach process from terminal
bground () {
    $* </dev/null &> /dev/null &
    disown
}

# clone via http

# clone via ssh 
clone () {
    url=$(echo "$*" | egrep -o 'https?://[^/]+')
    # url_new="${url##https?://github.com/}"
    # git clone github:$*
    echo $url
    URL_NOPRO=${URL:7}
    URL_REL=${URL_NOPRO#*/}
    # echo "/${URL_REL%%\?*}"

# echo 'https://github.com/github/github' | 
}
clone () {
    cd ~/.tests/repos
    git clone $*
}

clone-ssh () {
    cd ~/.tests/repos
    git clone github:$1
}

# take over a file that I didn't had access
iown () {
    sudo chown -R $USER $1
    chmod +rw $1
}

setup-py () {
    md $1
    cd $1
    python -m venv .venv
    pyenv local $2
    chpwd
    pip install autopep8 flake8
}

lh () {
    cd $1
    ls -ld .?*
    cd -
}


tv () {
    bground vlc ~/Videos/TV-Series/$1
}

# get quick docs using the given command
howto () {
    wget -q --spider http://google.com

    if [ $? -eq 0 ]; then
        curl -fsSL cheat.sh/$1 | less
    else
        echo "You don't have an internet connection"
    fi
}

# find alias
fa () {
    alias | grep "$*"
    if [[ $? -ne 0 ]]; then
        echo ðŸ¥º Not Found
    fi
}

add-dotfile () {
    mv $1 $2
    ln -sf $2 $1

}

dkcud () {
    docker-compose up -d
    docker attach my-components_react-app_1

}

# cp () {
    # if [[ *"`lsblk`"* == $2 ]]; then
        # echo true
    # else
        # echo false
    # fi
# }
code () {
    if [[ -d "$1" ]]; then
        music
    fi
    /usr/bin/code $*
}

music () {
    vlc ~/Music --random
}

txback () {
    if [[ $(xbacklight) == "100.000000" ]]; then
        xbacklight -set 1
    else
        xbacklight -set 100
    fi
}

python () {
    if [[ -n "$*" ]]; then 
        /usr/bin/env python $*
    
    else 
        ptpython
    fi
}

mov() {
    mv $1 "`dirname $1`/$2"
}

